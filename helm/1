apiVersion: v1
items:
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      buildUrl: http://jenkins.jenkins-admin.svc.cluster.local:8080/job/sample/5/
      runUrl: job/sample/5/
    creationTimestamp: "2024-04-03T14:20:47Z"
    labels:
      jenkins/jenkins-jenkins-agent: "true"
      jenkins/label: hello-0c5eebdd-302e-4afc-9982-27783658a87d
      jenkins/label-digest: 529bb2be0c6590623d6f63ca547abd212ffd1c86
    name: hello-0c5eebdd-302e-4afc-9982-27783658a87d-p574s-0crj3
    namespace: jenkins-admin
    resourceVersion: "63603"
    uid: afd7e2ed-973c-4599-ba76-fcf2e3ba2cc4
  spec:
    containers:
    - command:
      - cat
      image: harbor.cjs.com/edu/maven-build-tool:1.0.0
      imagePullPolicy: IfNotPresent
      name: maven
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      tty: true
      volumeMounts:
      - mountPath: /home/jenkins/agent
        name: workspace-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-vglwk
        readOnly: true
    - command:
      - cat
      image: harbor.cjs.com/edu/build-tool:1.0.0
      imagePullPolicy: IfNotPresent
      name: podman
      resources: {}
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      tty: true
      volumeMounts:
      - mountPath: /home/jenkins/agent
        name: workspace-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-vglwk
        readOnly: true
    - env:
      - name: JENKINS_SECRET
        value: 1f0d1511b89384a8f8de65e62e19c5dcbf891c700b07293f151088b560f43868
      - name: JENKINS_TUNNEL
        value: jenkins-agent.jenkins-admin.svc.cluster.local:50000
      - name: JENKINS_AGENT_NAME
        value: hello-0c5eebdd-302e-4afc-9982-27783658a87d-p574s-0crj3
      - name: JENKINS_NAME
        value: hello-0c5eebdd-302e-4afc-9982-27783658a87d-p574s-0crj3
      - name: JENKINS_AGENT_WORKDIR
        value: /home/jenkins/agent
      - name: JENKINS_URL
        value: http://jenkins.jenkins-admin.svc.cluster.local:8080/
      image: jenkins/inbound-agent:3148.v532a_7e715ee3-1
      imagePullPolicy: IfNotPresent
      name: jnlp
      resources:
        requests:
          cpu: 100m
          memory: 256Mi
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /home/jenkins/agent
        name: workspace-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-vglwk
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    nodeName: ip-10-0-2-242.ap-northeast-2.compute.internal
    nodeSelector:
      kubernetes.io/os: linux
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Never
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - emptyDir: {}
      name: workspace-volume
    - name: kube-api-access-vglwk
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T14:20:47Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T14:20:47Z"
      message: 'containers with unready status: [maven podman]'
      reason: ContainersNotReady
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T14:20:47Z"
      message: 'containers with unready status: [maven podman]'
      reason: ContainersNotReady
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T14:20:47Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://550d8980dd44d0840e142e4ebd839016ca565d7149df60e02588a76469959958
      image: docker.io/jenkins/inbound-agent:3148.v532a_7e715ee3-1
      imageID: docker.io/jenkins/inbound-agent@sha256:6d5b617d52fb771bc3e1bc55047505a2f3bb5a2c0fe820a474ff9e08d9226040
      lastState: {}
      name: jnlp
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2024-04-03T14:21:09Z"
    - image: harbor.cjs.com/edu/maven-build-tool:1.0.0
      imageID: ""
      lastState: {}
      name: maven
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          message: 'failed to pull and unpack image "harbor.cjs.com/edu/maven-build-tool:1.0.0":
            failed to resolve reference "harbor.cjs.com/edu/maven-build-tool:1.0.0":
            failed to do request: Head "https://harbor.cjs.com/v2/edu/maven-build-tool/manifests/1.0.0":
            net/http: TLS handshake timeout'
          reason: ErrImagePull
    - image: harbor.cjs.com/edu/build-tool:1.0.0
      imageID: ""
      lastState: {}
      name: podman
      ready: false
      restartCount: 0
      started: false
      state:
        waiting:
          message: 'failed to pull and unpack image "harbor.cjs.com/edu/build-tool:1.0.0":
            failed to resolve reference "harbor.cjs.com/edu/build-tool:1.0.0": failed
            to do request: Head "https://harbor.cjs.com/v2/edu/build-tool/manifests/1.0.0":
            net/http: TLS handshake timeout'
          reason: ErrImagePull
    hostIP: 10.0.2.242
    phase: Pending
    podIP: 10.0.2.164
    podIPs:
    - ip: 10.0.2.164
    qosClass: Burstable
    startTime: "2024-04-03T14:20:47Z"
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      checksum/config: 5ca25e7471a04ac79f7bb8299e4ee2d48940cdc7a032a96d6f8a01149c17a6fb
    creationTimestamp: "2024-04-03T13:34:36Z"
    generateName: jenkins-
    labels:
      app.kubernetes.io/component: jenkins-controller
      app.kubernetes.io/instance: jenkins
      app.kubernetes.io/managed-by: Helm
      app.kubernetes.io/name: jenkins
      apps.kubernetes.io/pod-index: "0"
      controller-revision-hash: jenkins-88f8bf74c
      statefulset.kubernetes.io/pod-name: jenkins-0
    name: jenkins-0
    namespace: jenkins-admin
    ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: StatefulSet
      name: jenkins
      uid: 13ad1875-1ef5-4f65-9d05-0ea95a848be3
    resourceVersion: "54423"
    uid: 62385ced-ab6c-4241-9860-17af24abb667
  spec:
    containers:
    - args:
      - --httpPort=8080
      env:
      - name: SECRETS
        value: /run/secrets/additional
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: JAVA_OPTS
        value: '-Dcasc.reload.token=$(POD_NAME) '
      - name: JENKINS_OPTS
        value: '--webroot=/var/jenkins_cache/war '
      - name: JENKINS_SLAVE_AGENT_PORT
        value: "50000"
      - name: CASC_JENKINS_CONFIG
        value: /var/jenkins_home/casc_configs
      image: jenkins/jenkins:2.414.1-jdk11
      imagePullPolicy: Always
      livenessProbe:
        failureThreshold: 5
        httpGet:
          path: /login
          port: http
          scheme: HTTP
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      name: jenkins
      ports:
      - containerPort: 8080
        name: http
        protocol: TCP
      - containerPort: 50000
        name: agent-listener
        protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /login
          port: http
          scheme: HTTP
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      resources:
        limits:
          cpu: "2"
          memory: 4Gi
        requests:
          cpu: 50m
          memory: 256Mi
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        runAsGroup: 1000
        runAsUser: 1000
      startupProbe:
        failureThreshold: 12
        httpGet:
          path: /login
          port: http
          scheme: HTTP
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 5
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/jenkins_home
        name: jenkins-home
      - mountPath: /var/jenkins_config
        name: jenkins-config
        readOnly: true
      - mountPath: /usr/share/jenkins/ref/plugins/
        name: plugin-dir
      - mountPath: /var/jenkins_home/casc_configs
        name: sc-config-volume
      - mountPath: /run/secrets/additional
        name: jenkins-secrets
        readOnly: true
      - mountPath: /var/jenkins_cache
        name: jenkins-cache
      - mountPath: /tmp
        name: tmp-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-2v9zb
        readOnly: true
    - env:
      - name: POD_NAME
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.name
      - name: LABEL
        value: jenkins-jenkins-config
      - name: FOLDER
        value: /var/jenkins_home/casc_configs
      - name: NAMESPACE
        value: jenkins-admin
      - name: REQ_URL
        value: http://localhost:8080/reload-configuration-as-code/?casc-reload-token=$(POD_NAME)
      - name: REQ_METHOD
        value: POST
      - name: REQ_RETRY_CONNECT
        value: "10"
      image: kiwigrid/k8s-sidecar:1.24.4
      imagePullPolicy: IfNotPresent
      name: config-reload
      resources: {}
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/jenkins_home/casc_configs
        name: sc-config-volume
      - mountPath: /var/jenkins_home
        name: jenkins-home
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-2v9zb
        readOnly: true
    dnsPolicy: ClusterFirst
    enableServiceLinks: true
    hostAliases:
    - hostnames:
      - harbor.cjs.com
      ip: 54.180.57.210
    hostname: jenkins-0
    imagePullSecrets:
    - name: harbor
    initContainers:
    - command:
      - sh
      - /var/jenkins_config/apply_config.sh
      image: jenkins/jenkins:2.414.1-jdk11
      imagePullPolicy: Always
      name: init
      resources:
        limits:
          cpu: "2"
          memory: 4Gi
        requests:
          cpu: 50m
          memory: 256Mi
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        runAsGroup: 1000
        runAsUser: 1000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/jenkins_home
        name: jenkins-home
      - mountPath: /var/jenkins_config
        name: jenkins-config
      - mountPath: /usr/share/jenkins/ref/plugins
        name: plugins
      - mountPath: /var/jenkins_plugins
        name: plugin-dir
      - mountPath: /tmp
        name: tmp-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: kube-api-access-2v9zb
        readOnly: true
    nodeName: ip-10-0-1-158.ap-northeast-2.compute.internal
    preemptionPolicy: PreemptLowerPriority
    priority: 0
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000
      runAsNonRoot: true
      runAsUser: 1000
    serviceAccount: jenkins-admin
    serviceAccountName: jenkins-admin
    subdomain: jenkins
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    volumes:
    - emptyDir: {}
      name: plugins
    - configMap:
        defaultMode: 420
        name: jenkins
      name: jenkins-config
    - emptyDir: {}
      name: plugin-dir
    - name: jenkins-secrets
      projected:
        defaultMode: 420
        sources:
        - secret:
            items:
            - key: jenkins-admin-user
              path: chart-admin-username
            - key: jenkins-admin-password
              path: chart-admin-password
            name: jenkins
    - emptyDir: {}
      name: jenkins-cache
    - name: jenkins-home
      persistentVolumeClaim:
        claimName: jenkins
    - emptyDir: {}
      name: sc-config-volume
    - emptyDir: {}
      name: tmp-volume
    - name: kube-api-access-2v9zb
      projected:
        defaultMode: 420
        sources:
        - serviceAccountToken:
            expirationSeconds: 3607
            path: token
        - configMap:
            items:
            - key: ca.crt
              path: ca.crt
            name: kube-root-ca.crt
        - downwardAPI:
            items:
            - fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
              path: namespace
  status:
    conditions:
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T13:35:03Z"
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T13:38:14Z"
      status: "True"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T13:38:14Z"
      status: "True"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2024-04-03T13:34:40Z"
      status: "True"
      type: PodScheduled
    containerStatuses:
    - containerID: containerd://8bdc4bf2047400a2b2fb8ce5d5330b71a97b1d36fc7810b5c44f9707030ae73b
      image: docker.io/kiwigrid/k8s-sidecar:1.24.4
      imageID: docker.io/kiwigrid/k8s-sidecar@sha256:4138bea678f0725a5c329aeb1264f5c850b8ae9a2a89a421c6d9cdc510a7e0eb
      lastState: {}
      name: config-reload
      ready: true
      restartCount: 0
      started: true
      state:
        running:
          startedAt: "2024-04-03T13:35:05Z"
    - containerID: containerd://ccb2641de518e44d59a5d35e709abdbe8402fbcb704dbc710600a252ebfa8746
      image: docker.io/jenkins/jenkins:2.414.1-jdk11
      imageID: docker.io/jenkins/jenkins@sha256:645d55b80126b67dd23b6ba65d455ebc13689d057f498fbecd7bdb9165f0dd64
      lastState:
        terminated:
          containerID: containerd://30fff56e5436308a40de4fedb05d4e14d20a12b3c3a8424856e9fb1175983f7c
          exitCode: 5
          finishedAt: "2024-04-03T13:37:47Z"
          reason: Error
          startedAt: "2024-04-03T13:35:05Z"
      name: jenkins
      ready: true
      restartCount: 1
      started: true
      state:
        running:
          startedAt: "2024-04-03T13:37:49Z"
    hostIP: 10.0.1.158
    initContainerStatuses:
    - containerID: containerd://6cf65dbd17ff45c5ec420f1602f7dbd866bae2774170f5d6723d71ab0bf9f5e2
      image: docker.io/jenkins/jenkins:2.414.1-jdk11
      imageID: docker.io/jenkins/jenkins@sha256:645d55b80126b67dd23b6ba65d455ebc13689d057f498fbecd7bdb9165f0dd64
      lastState: {}
      name: init
      ready: true
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://6cf65dbd17ff45c5ec420f1602f7dbd866bae2774170f5d6723d71ab0bf9f5e2
          exitCode: 0
          finishedAt: "2024-04-03T13:35:02Z"
          reason: Completed
          startedAt: "2024-04-03T13:34:46Z"
    phase: Running
    podIP: 10.0.1.33
    podIPs:
    - ip: 10.0.1.33
    qosClass: Burstable
    startTime: "2024-04-03T13:34:40Z"
kind: List
metadata:
  resourceVersion: ""
